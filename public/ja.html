<!DOCTYPE html>
<html ng-app="myModule">
<head>
<title>Angular piano</title>
<script src="js/angular.min.js"></script>
<script src="js/jquery.min.js"></script>
<script src="js/keys.js" type="text/javascript"></script>
<script src="js/gmidi.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/pragmatic-angular.js"></script>
<link rel="stylesheet" href="css/jquery-ui.min.css">
<link rel="stylesheet" href="css/piano.css">
<script src="js/app.js"></script>
</head>
<body ng-controller="myController" ng-keydown="onKeyDown($event)" ng-keyup="onKeyUp($event)">
<div id=piano class="Center">
 <div class=ebony ng-model="keys">
  <span  ng-repeat="i in keys.b track by $index" id="{{i}}" ng-class="{'break': i == '|', 'on': isSelected(i)}" ng-mousedown="down(i)" ng-mouseup="up(i)"></span>
 </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
 <div class=ivory ng-model="keys">
  <span  ng-repeat="i in keys.w" id="{{i}}" ng-mousedown="down(i)" ng-mouseup="up(i)" ng-class="{'on': isSelected(i)}"></span> 
 </div>
</div>
<center>
<p>
<label>MIDI Out:</label><select id=selectmidi ng-change="changemidi();" ng-model="_out">
 <option ng-init="_out=list[0]" ng-repeat="i in list" ng-selected="{{i==_out}}" value="{{i}}">{{i}}</option>
</select>
<label>Sound: </label><select id=midiSnd ng-change='changeSnd();' ng-model="_sound" ng-init="init()">
 <option ng-init="_sound='Drawbar Organ'" ng-repeat="i in sounds" ng-selected="{{i==_sound}}" value="{{i}}">{{i}}</option>
</select>
<label>Scale: </label>
<select id=scales ng-change='changeScale();' ng-model="_scale">
 <option ng-init="_scale='natural major'" ng-repeat="i in scales" ng-selected="{{i==_scale}}" value="{{i}}">{{i}}</option>
</select>
</p>
<strong>MIDI Notes : </strong>{{note}}
<p class = "controls">
 <p>
  <label>Sustain: </label>
  <input type="checkbox" ng-model="checked">
 </p>
 <p>
  <label>Volume: </label>{{volume}}
  <div title="volume" ng-jquery-plugin="{ slider : { min: 0,	max: 127, value: volume, stop : changeVolume } }"></div>
 </p>
 <p>
  <label>Modulation: </label>{{modulation}}
  <div title="modulation" ng-jquery-plugin="{ slider : { min: 0,	max: 127, value: modulation, stop : changeModulation } }"></div>
 </p>
 <p>
  <label>Pan: </label>{{pan}}
  <div title="pan" ng-jquery-plugin="{ slider : { min: 0,	max: 127, value: pan, stop : changePan } }"></div>
 </p>
</p>

<div class="center">
 <img src="images/keyboard.png" width="600" height="192" ng-style="myStyle" ng-click="myStyle={opacity:0}" title="click to hide">
</div>
<table>
  <tr ng-repeat="m in msg">
    <td ng-class="{'On': msg[0] == 144, 'Off': msg[0] == 128, 'Control': msg[0] == 176, 'Program': msg[0] == 192}">{{ m }}</td>  
  </tr>
</table>
</center> 
</body>
</html>